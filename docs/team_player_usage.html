<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Team Player Usage Patterns</title>
  <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
  <style>
    :root {
      --red: #ef4444;
      --blue: #0ea5e9;
      --grid: #e8eaed;
      --axis: #9aa0a6;
      --text: #222;
    }
    body { margin: 16px; font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; color: var(--text); background: #f7f7f7; }
    .container { max-width: 1200px; margin: 0 auto; background: #fff; border: 1px solid #e5e5e5; border-radius: 10px; padding: 12px 16px 22px; box-shadow: 0 1px 3px rgba(0,0,0,.06); }
    h1 { margin: 0 0 10px; font-size: 22px; }
    .subtitle { color: #666; font-size: 13px; margin: 4px 0 12px; }
    .controls { display: flex; align-items: center; gap: 10px; margin: 6px 0 8px; }
    .panel { margin: 12px 0 14px; border: 1px solid #e5e5e5; border-radius: 10px; overflow: hidden; background: #fff; }
    .panel > summary { padding: 10px 14px; background: #f5f7fa; border-bottom: 1px solid #ebeff5; font-weight: 600; cursor: pointer; user-select: none; list-style: none; }
    .panel[open] > summary { border-bottom-color: #e6eaf0; }
    .chart-wrap { padding: 8px 8px 0; }
    .legend { display: flex; align-items: center; gap: 16px; color: #555; font-size: 12px; padding: 0 10px 10px; }
    .swatch { display: inline-block; width: 12px; height: 12px; border-radius: 2px; margin-right: 6px; vertical-align: middle; }
    .avg { background: repeating-linear-gradient(90deg, #bbb, #bbb 2px, transparent 2px, transparent 6px); border: 1px solid #bbb; }
    .red { background: var(--red); opacity: .5; }
    .blue { background: var(--blue); opacity: .5; }
    .tooltip { position: absolute; pointer-events: none; background: rgba(0,0,0,.78); color: #fff; padding: 6px 8px; border-radius: 6px; font-size: 12px; z-index: 10; }
    .info { background: #f3f6fa; border: 1px solid #e1e7ef; border-radius: 8px; padding: 10px 14px; color: #243246; font-size: 14px; margin: 8px 0 12px; }
    .correlation-badge { display: inline-block; padding: 2px 8px; border-radius: 4px; font-size: 11px; font-weight: 600; }
    .corr-strong { background: #dcfce7; color: #166534; }
    .corr-moderate { background: #fef3c7; color: #854d0e; }
    .corr-weak { background: #fee2e2; color: #991b1b; }
    .help-icon { display: inline-block; width: 16px; height: 16px; border-radius: 50%; background: #3b82f6; color: white; text-align: center; line-height: 16px; font-size: 11px; font-weight: bold; margin-left: 8px; cursor: help; vertical-align: middle; }
    .metric-tooltip { position: absolute; pointer-events: none; background: rgba(30,64,175,.95); color: #fff; padding: 8px 12px; border-radius: 6px; font-size: 12px; z-index: 100; max-width: 350px; line-height: 1.5; box-shadow: 0 4px 6px rgba(0,0,0,.3); }
  </style>
  <script>
    async function tryCsv(paths) {
      let lastErr;
      for (const p of paths) {
        try { return await d3.csv(p, d3.autoType); } catch (e) { lastErr = e; }
      }
      throw lastErr || new Error('Unable to load CSV: ' + paths.join(', '));
    }

    function fmt1(x) { return d3.format('.1f')(x); }
    function fmt2(x) { return d3.format('.2f')(x); }
    function fmt3(x) { return d3.format('.3f')(x); }
    function toPct(x) { return d3.format('.1%')(x); }
    function toPct0(x) { return d3.format('.0%')(x); }

    function regression(points) {
      let n = 0, sx = 0, sy = 0, sxy = 0, sxx = 0, syy = 0;
      for (const [x0, y0] of points) {
        const x = +x0, y = +y0;
        if (!Number.isFinite(x) || !Number.isFinite(y)) continue;
        n++; sx += x; sy += y; sxy += x*y; sxx += x*x; syy += y*y;
      }
      if (n < 2) return { m: 0, b: sy / (n || 1), r2: 0 };
      const denom = n * sxx - sx * sx;
      const m = denom !== 0 ? (n * sxy - sx * sy) / denom : 0;
      const b = (sy - m * sx) / n;
      
      const ssr = points.reduce((sum, [x0, y0]) => {
        const x = +x0, y = +y0;
        if (!Number.isFinite(x) || !Number.isFinite(y)) return sum;
        return sum + Math.pow(y - (m * x + b), 2);
      }, 0);
      const sst = syy - (sy * sy) / n;
      const r2 = sst !== 0 ? Math.max(0, 1 - ssr / sst) : 0;
      
      return { m, b, r2 };
    }

    async function loadData() {
      const stats = await tryCsv([
        '../output/team_player_usage.csv',
        'output/team_player_usage.csv',
        '/output/team_player_usage.csv'
      ]);

      for (const row of stats) {
        row.logoUrl = (row.logoId !== '' && row.logoId != null) ? 
          `https://cdn.neonsportz.com/teamlogos/256/${row.logoId}.png` : null;
      }

      return stats;
    }

    function drawScatter(holder, rows, cfg) {
      rows = rows.filter(d => 
        Number.isFinite(+d[cfg.xKey]) && Number.isFinite(+d[cfg.yKey])
      );

      if (rows.length < 2) return;

      const margin = { top: 20, right: 24, bottom: 46, left: 70 };
      const width = 1080, height = 480;
      const innerW = width - margin.left - margin.right;
      const innerH = height - margin.top - margin.bottom;

      const panel = holder.append('details').attr('class', 'panel').attr('open', true);
      const summary = panel.append('summary');
      summary.append('span').text(cfg.title);
      
      if (cfg.metricHelp) {
        const helpIcon = summary.append('span').attr('class', 'help-icon').text('?');
        const metricTip = d3.select('body').append('div').attr('class', 'metric-tooltip').style('display', 'none');
        helpIcon.on('mouseenter', function(evt) {
          metricTip.style('display', 'block').html(cfg.metricHelp);
        }).on('mousemove', (evt) => {
          metricTip.style('left', (evt.pageX + 12) + 'px').style('top', (evt.pageY - 28) + 'px');
        }).on('mouseleave', () => {
          metricTip.style('display', 'none');
        });
      }
      
      const wrap = panel.append('div').attr('class', 'chart-wrap');
      const svg = wrap.append('svg').attr('width', width).attr('height', height);
      const g = svg.append('g').attr('transform', `translate(${margin.left},${margin.top})`);

      const yVals = rows.map(d => +d[cfg.yKey]);
      const yMin = d3.min(yVals), yMax = d3.max(yVals);
      const yRange = yMax - yMin;
      const yPad = yRange * 0.15 || 0.5;
      const y = d3.scaleLinear()
        .domain([yMin - yPad, yMax + yPad])
        .range([innerH, 0]);

      const xVals = rows.map(d => +d[cfg.xKey]);
      const xMin = d3.min(xVals), xMax = d3.max(xVals);
      const xRange = xMax - xMin;
      const xPad = xRange * 0.15 || 0.5;
      const x = d3.scaleLinear()
        .domain([xMin - xPad, xMax + xPad])
        .range([0, innerW]);

      g.append('g').attr('transform', `translate(0,${innerH})`)
        .call(d3.axisBottom(x).ticks(10).tickFormat(cfg.xFormat || fmt2).tickSize(-innerH).tickPadding(8))
        .call(s => s.selectAll('.tick line').attr('stroke', '#e2e2e2'))
        .call(s => s.select('.domain').attr('stroke', '#9aa0a6'));

      g.append('g')
        .call(d3.axisLeft(y).ticks(10).tickFormat(cfg.yFormat || fmt2).tickSize(-innerW).tickPadding(6))
        .call(s => s.selectAll('.tick line').attr('stroke', '#efefef'))
        .call(s => s.select('.domain').attr('stroke', '#dcdcdc'));

      const yAvg = d3.mean(yVals), xAvg = d3.mean(xVals);
      g.append('line').attr('x1', 0).attr('x2', innerW).attr('y1', y(yAvg)).attr('y2', y(yAvg))
        .attr('stroke', '#999').attr('stroke-dasharray', '6,4').attr('stroke-width', 1.5);
      g.append('line').attr('x1', x(xAvg)).attr('x2', x(xAvg)).attr('y1', 0).attr('y2', innerH)
        .attr('stroke', '#9aa0a6').attr('stroke-dasharray', '6,4').attr('stroke-width', 1.5);
      g.append('text').attr('x', 6).attr('y', y(yAvg)-6).attr('fill', '#555').attr('font-size', 11)
        .text('Avg Y: ' + (cfg.yFormat || fmt2)(yAvg));
      g.append('text').attr('x', x(xAvg)+6).attr('y', 12).attr('fill', '#555').attr('font-size', 11)
        .text('Avg X: ' + (cfg.xFormat || fmt2)(xAvg));

      const { m, b, r2 } = regression(rows.map(d => [+d[cfg.xKey], +d[cfg.yKey]]));
      const xRangePts = [d3.min(xVals), d3.max(xVals)];
      g.append('line')
        .attr('x1', x(xRangePts[0])).attr('y1', y(m*xRangePts[0] + b))
        .attr('x2', x(xRangePts[1])).attr('y2', y(m*xRangePts[1] + b))
        .attr('stroke', '#777').attr('stroke-width', 2).attr('opacity', .95);

      const tip = d3.select('body').append('div').attr('class', 'tooltip').style('display', 'none');

      const size = 30;
      const node = g.selectAll('.team').data(rows, d => d.team).join('g').attr('class', 'team')
        .attr('transform', d => `translate(${x(d[cfg.xKey])},${y(d[cfg.yKey])})`)
        .on('mouseenter', function(evt, d){
          const trend = m * d[cfg.xKey] + b;
          const res = d[cfg.yKey] - trend;
          let html = `<strong>${d.team}</strong><br>`;
          html += `${cfg.xLabel}: ${(cfg.xFormat || fmt2)(d[cfg.xKey])}<br>`;
          html += `${cfg.yLabel}: ${(cfg.yFormat || fmt2)(d[cfg.yKey])}<br>`;
          html += `Win%: ${toPct(d.win_pct)}<br>`;
          if (cfg.extraInfo) html += cfg.extraInfo(d) + '<br>';
          html += `Œî vs trend: ${(res>=0?'+':'') + fmt2(res)}<br>`;
          
          const qx = +d[cfg.xKey] >= xAvg;
          const qy = +d[cfg.yKey] >= yAvg;
          let quadrant = '';
          if (cfg.quadrantHelp) {
            if (qx && qy) quadrant = '<em>' + cfg.quadrantHelp.topRight + '</em>';
            else if (!qx && qy) quadrant = '<em>' + cfg.quadrantHelp.topLeft + '</em>';
            else if (!qx && !qy) quadrant = '<em>' + cfg.quadrantHelp.bottomLeft + '</em>';
            else quadrant = '<em>' + cfg.quadrantHelp.bottomRight + '</em>';
          } else {
       	  	if (qx && qy) quadrant = '<em>Oben rechts: Hoher X-Wert, Hoher Y-Wert</em>';
             else if (!qx && qy) quadrant = '<em>Oben links: Niedriger X-Wert, Hoher Y-Wert</em>';
             else if (!qx && !qy) quadrant = '<em>Unten links: Niedriger X-Wert, Niedriger Y-Wert</em>';
             else quadrant = '<em>Unten rechts: Hoher X-Wert, Niedriger Y-Wert</em>';
          }
          html += quadrant;
          
          tip.style('display','block').html(html);
        })
        .on('mousemove', (evt)=> tip.style('left', (evt.pageX+12)+'px').style('top',(evt.pageY-28)+'px'))
        .on('mouseleave', ()=> tip.style('display','none'));

      node.append('rect')
        .attr('x', -(size/2 + 2)).attr('y', -(size/2 + 2))
        .attr('width', size + 4).attr('height', size + 4)
        .attr('rx', 4).attr('ry', 4)
        .attr('fill', d => (+d[cfg.yKey] >= m*+d[cfg.xKey] + b) ? 'var(--red)' : 'var(--blue)')
        .attr('opacity', .16);

      node.append('image')
        .attr('href', d => d.logoUrl || null)
        .attr('x', -size/2).attr('y', -size/2)
        .attr('width', size).attr('height', size)
        .attr('opacity', .95);

      svg.append('text').attr('x', margin.left + innerW/2).attr('y', height-10)
        .attr('text-anchor', 'middle').attr('fill', '#444').attr('font-size', 12)
        .text(cfg.xLabel);
      svg.append('text').attr('transform', `translate(14, ${margin.top + innerH/2}) rotate(-90)`)
        .attr('text-anchor', 'middle').attr('fill', '#444').attr('font-size', 12)
        .text(cfg.yLabel);

      const legend = panel.append('div').attr('class', 'legend');
      legend.append('span').html('<span class="swatch red"></span> Above Trend');
      legend.append('span').html('<span class="swatch blue"></span> Below Trend');
      legend.append('span').html('<span class="swatch avg"></span> Average Lines');
      
      let corrClass = 'corr-weak', corrLabel = 'Weak';
      if (r2 >= 0.5) { corrClass = 'corr-strong'; corrLabel = 'Strong'; }
      else if (r2 >= 0.25) { corrClass = 'corr-moderate'; corrLabel = 'Moderate'; }
      
      summary.append('span').attr('class', `correlation-badge ${corrClass}`)
        .style('margin-left', '12px')
        .html(`R¬≤=${fmt3(r2)} (${corrLabel})`);

      if (cfg.insight) {
        panel.append('div').style('padding', '8px 14px 10px').style('font-size', '13px')
          .style('color', '#555').style('font-style', 'italic').text('üí° ' + cfg.insight);
      }
    }

    function render() {
      loadData().then(allRows => {
        const charts = [
          {
            xKey: 'wr1_share',
            yKey: 'win_pct',
            xLabel: 'WR1 Target Share (%)',
            yLabel: 'Win Percentage',
            xFormat: fmt1,
            yFormat: toPct,
            title: 'Star Receiver Dependency',
            insight: 'Do teams need a dominant WR1 to win? Or is spreading the ball better?',
            extraInfo: d => `WR1: ${d.wr1_name} (${d.wr1_position})`,
            metricHelp: '<strong>WR1 Target Share:</strong> Prozentsatz der P√§sse, die auf den Haupt-WR des Teams geworfen werden, gemessen an der Gesamtzahl der P√§sse. Ein hoher Prozentsatz (>30%) = Abh√§ngigkeit von einem Star.',
            quadrantHelp: {
              topRight: '‚≠ê Superstar-Formel: Das Team hat einen dominanten WR1 (>30% der Targets) und das f√ºhrt zu Siegen. Der Quarterback vertraut einem Spieler in entscheidenden Momenten, die gegnerische Verteidigung kann diese Verbindung nicht stoppen. Der WR1 gewinnt 1-gegen-1-Matchups, besonders in Clutch-Situationen.',
              topLeft: 'üéØ Demokratie siegt: Das Team gewinnt ohne klare Abh√§ngigkeit von einem Receiver. Der QB liest das gesamte Feld, findet den offenen Mann. F√ºr die Defense ist schwer vorherzusagen, wer den Ball bekommt. Das ist ein Zeichen f√ºr einen Elite-QB und einen tiefen WR-Kader.',
              bottomLeft: 'üòî Krise im Luftangriff: Kein dominanter Receiver UND das Team verliert. Entweder kann der QB kein zuverl√§ssiges Ziel finden oder die gesamte Receiver-Gruppe ist schwach. Das Team braucht dringend einen Playmaker im Passspiel.',
              bottomRight: 'ü§î Talent ohne Ergebnis: Der WR1 erh√§lt den L√∂wenanteil der P√§sse, aber das Team verliert. M√∂gliche Gr√ºnde: Vorhersehbarkeit der Offense, schwache O-Line gibt dem QB keine Zeit, oder die Defense ist so schlecht, dass selbst ein Star-WR nicht rettet.'
            }
          },
          {
            xKey: 'te_target_share',
            yKey: 'win_pct',
            xLabel: 'TE Target Share (%)',
            yLabel: 'Win Percentage',
            xFormat: fmt1,
            yFormat: toPct,
            title: 'Tight End Usage vs Winning',
            insight: 'Elite TEs are game-changers. Do teams that feature their TE win more?',
            extraInfo: d => `TE1: ${d.te1_name || 'N/A'}`,
            metricHelp: '<strong>TE Target Share:</strong> Prozentsatz der F√§nge des Tight Ends an der Gesamtzahl der F√§nge des Teams. Ein hoher Prozentsatz (>20%) = TE als Hauptwaffe im Passspiel.',
            quadrantHelp: {
              topRight: '‚≠ê √Ñra des Tight Ends: Das Team hat die Offense um einen Elite-TE (>20% der Targets) aufgebaut und das zahlt sich mit Siegen aus. Der TE schafft Mismatches: zu gro√ü f√ºr Cornerbacks, zu schnell f√ºr Linebacker. Dominiert in der Red Zone, unersetzlich bei 3rd Down. Ein modernes Schema mit dem TE im Slot zerst√∂rt Zonenverteidigungen.',
              topLeft: '‚úÖ WR-Maschine: Das Team gewinnt durch die Dominanz der Wide Receiver. Der TE erf√ºllt die Rolle eines Blockers oder Sicherheitsventils. Das ist ein klassischer vertikaler Angriffsstil, bei dem die Geschwindigkeit der WR das Feld streckt.',
              bottomLeft: 'üòî Vernachl√§ssigte Feldmitte: Das Team ignoriert die TE-Position und bezahlt daf√ºr mit Niederlagen. Ohne Bedrohung in der Mitte kann die Defense die Au√üenzonen leicht abdecken. Dem Team fehlt ein zuverl√§ssiger Spieler f√ºr kurze und mittlere P√§sse.',
              bottomRight: 'ü§î TE-Kr√ºcke: Das Team forciert P√§sse auf den Tight End, aber das f√ºhrt nicht zu Siegen. Vielleicht ist er der einzig zuverl√§ssige Receiver wegen schwacher WRs, oder der QB sieht die tiefen Zonen nicht. Die Offense wird vorhersehbar und limitiert.'
            }
          },
          {
            xKey: 'rb_target_share',
            yKey: 'win_pct',
            xLabel: 'RB Target Share (% of catches)',
            yLabel: 'Win Percentage',
            xFormat: fmt1,
            yFormat: toPct,
            title: 'Running Back Receiving Usage',
            insight: 'Pass-catching RBs create mismatches. Does featuring RBs in passing game correlate with wins?',
            extraInfo: d => `RB1: ${d.rb1_name}, RB2: ${d.rb2_name || 'N/A'}`,
            metricHelp: '<strong>RB Target Share:</strong> Prozentsatz der F√§nge von RBs an der Gesamtzahl der F√§nge. Ein hoher Prozentsatz (>25%) = aktive Nutzung des RBs im Passspiel oder Abwerfen des Balls unter Druck.',
            quadrantHelp: {
              topRight: 'üèÉ Doppelte RB-Bedrohung: Der Running Back f√§ngt 25%+ der P√§sse UND das Team gewinnt. Der RB geht in den Slot, schafft Mismatches gegen Linebacker, f√§ngt Screens und Checkdowns. Die Defense kann keine schwere Front spielen ‚Äì der RB entwischt zum Fang. Ein Albtraum f√ºr Defense-Koordinatoren.',
              topLeft: 'üéØ Klassisch vertikal: Siege durch Dominanz von WR/TE, der RB bleibt im Backfield zum Blocken oder Laufen. Reiner Pocket-Passer-Stil ‚Äì QB steht in der Pocket, WR laufen tiefe Routen. RB = Absicherung gegen den Blitz.',
              bottomLeft: 'üòî Eindimensionale Schw√§che: Der RB ist keine Bedrohung im Passspiel UND das Team verliert. Die Defense ignoriert den RB in der Coverage, konzentriert sich auf die WR. Vorhersehbare Offense: Wenn der RB im Spiel ist = Lauf, wenn nicht = Pass. Leicht zu verteidigen.',
              bottomRight: '‚ö†Ô∏è Panik unter Druck: Der RB f√§ngt viele P√§sse (25%+), aber das Team verliert. Das ist ein Symptom: Der QB wirft unter st√§ndigem Druck zum RB ab, keine Zeit f√ºr die Entwicklung der WR-Routen. Die O-Line blockt nicht, die gesamte Offense basiert auf kurzen Abw√ºrfen.'
            }
          },
          {
            xKey: 'pass_concentration',
            yKey: 'win_pct',
            xLabel: 'Pass Concentration (Herfindahl Index)',
            yLabel: 'Win Percentage',
            xFormat: fmt1,
            yFormat: toPct,
            title: 'Passing Target Distribution',
            insight: 'Concentrated (high) = one star. Spread (low) = balanced. Which strategy wins more?',
            extraInfo: d => `Top 3: ${d.wr1_name}, ${d.wr2_name || 'N/A'}, ${d.wr3_name || 'N/A'}`,
            metricHelp: '<strong>Herfindahl-Index:</strong> Konzentrationsindex der Passverteilung (0-10000). >1500 = Konzentration auf einen Spieler, 1000-1500 = Balance, <1000 = gleichm√§√üige Verteilung auf viele Spieler.',
            quadrantHelp: {
              topRight: '‚≠ê Talent-Monopol: Index >1500 + Siege = ein Spieler erh√§lt 35-40% aller Targets und dominiert. QB und WR1 sind auf einer Wellenl√§nge, jede Route ist automatisiert. Die Defense wei√ü, wohin der Ball fliegt, kann es aber nicht stoppen. Risiko: Verletzung des Stars = Zusammenbruch der Offense.',
              topLeft: 'üéØ Schachpartie: Index <1000 + Siege = 5-6 Spieler teilen die Targets gleichm√§√üig auf. Der QB ist wie ein Dirigent, attackiert bei jedem Down die Schwachstelle der Defense. Unm√∂glich, alle zu doppeln. Ein Zeichen f√ºr hohen Football-IQ im gesamten Team.',
              bottomLeft: 'üòî Angriff ohne Identit√§t: Keine Konzentration (<1000) + Niederlagen = Chaos im Passspiel. Der QB hat keine zuverl√§ssige erste Option, verteilt den Ball zuf√§llig. Niemand √ºbernimmt Verantwortung in kritischen Momenten. Es wird ein Anf√ºhrer im Receiving Corps ben√∂tigt.',
              bottomRight: 'ü§î Einseitige Abh√§ngigkeit: Index >1500 + Niederlagen = die gesamte Offense lastet auf den Schultern eines Spielers, aber das ist nicht genug. Die gegnerische Defense doppelt/dreifacht den Star, die anderen WR k√∂nnen das nicht ausnutzen. WR2/WR3 m√ºssen entwickelt oder das Schema ge√§ndert werden.'
            }
          },
          {
            xKey: 'rb1_share',
            yKey: 'win_pct',
            xLabel: 'RB1 Rush Share (%)',
            yLabel: 'Win Percentage',
            xFormat: fmt1,
            yFormat: toPct,
            title: 'Bellcow RB vs Committee Approach',
            insight: 'Feature back (70%+) vs RBBC (50-60%). Does workhorse RB strategy win more?',
            extraInfo: d => `RB1: ${d.rb1_name} (${d.rb1_position}) - ${d.rush_distribution_style}`,
            metricHelp: '<strong>RB1 Share:</strong> Prozentsatz der L√§ufe des Haupt-RBs an der Gesamtzahl der L√§ufe. >70% = Bellcow (Hauptlasttr√§ger), 50-60% = RBBC (Komitee), <50% = Rotation.',
            quadrantHelp: {
              topRight: 'üí™ Arbeitspferd des Imperiums: RB1 tr√§gt 70%+ der L√§ufe UND das Team gewinnt. Dieser L√§ufer ist das Metronom der Offense, 20-25 Versuche pro Spiel. Die Defense erm√ºdet von seinen Schl√§gen, das 4. Viertel = seine Zeit. Die O-Line kennt seinen Stil, perfektes Timing der Blocks. Stil "feed the beast".',
              topLeft: 'üîÑ Frische entscheidet: RBBC (50-60% f√ºr RB1) + Siege = clevere Rotation. Jeder RB hat eine Rolle: RB1 zwischen den Tackles, RB2 f√ºr Au√üenl√§ufe, RB3 bei 3rd Down. Die Defense kann sich nicht auf einen Laufstil einstellen. Im 4. Viertel sind alle L√§ufer frisch.',
              bottomLeft: 'üòî Komitee des Scheiterns: RBBC + Niederlagen = es gibt keinen RB, der das Spiel an sich rei√üen kann. St√§ndige Rotation zerst√∂rt den Rhythmus, die O-Line kann sich nicht an unterschiedliche Stile anpassen. Chaotisches Laufspiel ohne Identit√§t.',
              bottomRight: '‚ö†Ô∏è √úberlastetes Pferd: RB1 mit 70%+ der L√§ufe + Niederlagen = √úberlastung ohne Ergebnis. Im 3. Viertel verliert der RB an Explosivit√§t, aber es gibt keine Alternative. M√∂glicherweise ist die O-Line schwach oder das Play-Calling vorhersehbar. Verschlei√ü ohne Ertrag.'
            }
          },
          {
            xKey: 'top3_share',
            yKey: 'win_pct',
            xLabel: 'Top 3 Receivers Target Share (%)',
            yLabel: 'Win Percentage',
            xFormat: fmt1,
            yFormat: toPct,
            title: 'Top 3 Receiver Dominance',
            insight: 'High concentration in top 3 = star-driven offense. Low = depth & spreading the ball.',
            extraInfo: d => `Top 3: ${d.wr1_name}, ${d.wr2_name || 'N/A'}, ${d.wr3_name || 'N/A'}`,
            metricHelp: '<strong>Top 3 Share:</strong> Gesamtprozentsatz der F√§nge der Top-3-Receiver an der Gesamtzahl. >75% = Konzentration auf Stars, <60% = tiefer Kader mit gleichm√§√üiger Verteilung.',
            quadrantHelp: {
              topRight: '‚≠ê Die Gro√üen Drei regieren: Die Top 3 erhalten 75%+ der Targets UND gewinnen. Das Team hat eine WR1-WR2-WR3/TE-Triade, die der Defense keine Luft zum Atmen l√§sst. Einer im Slot, einer tief, einer auf mittlerer Distanz ‚Äì immer ist jemand offen. Der QB hat drei zuverl√§ssige Optionen bei jedem Down.',
              topLeft: 'üéØ Armee der namenlosen Helden: <60% f√ºr die Top 3 + Siege = die Kadertiefe entscheidet. WR4, WR5, TE2 fangen regelm√§√üig wichtige P√§sse. Die Defense bereitet sich auf die Stars vor, und ein unbekannter WR6 f√§ngt den Touchdown. Ein Albtraum f√ºr das gegnerische Scouting.',
              bottomLeft: 'üòî W√ºste im Receiving Corps: Top 3 schwach (<60%) + Niederlagen = weder Stars noch Tiefe. Der QB ist gezwungen zu riskieren, indem er auf gedeckte Spieler wirft. Viele Panik-Abw√ºrfe auf RBs. Dringend werden Drafts/Trades auf den WR-Positionen ben√∂tigt.',
              bottomRight: 'ü§î Vorhersehbare Drei: Top 3 mit 75%+ der Targets + Niederlagen = die Defense wei√ü, wen sie decken muss. Bracket Coverage f√ºr WR1, Safety-Hilfe f√ºr WR2, physischer Corner f√ºr WR3. Die restlichen Receiver stellen keine Bedrohung dar. Es braucht ein neues Schema oder die Entwicklung von WR4+.'
            }
          },
          {
            xKey: 'pass_concentration',
            yKey: 'rush_concentration',
            xLabel: 'Pass Concentration',
            yLabel: 'Rush Concentration',
            xFormat: fmt1,
            title: 'Offensive Philosophy: Concentration Strategy',
            insight: 'Top-right = star-driven (both pass & rush). Bottom-left = committee approach on both.',
            extraInfo: d => `Pass: ${d.wr1_name} | Rush: ${d.rb1_name}`,
            metricHelp: '<strong>Angriffs-Philosophie:</strong> Vergleich der Konzentration im Pass- und Laufspiel. Oben rechts = Star-Taktik, unten links = kollektiver Ansatz.',
            quadrantHelp: {
              topRight: '‚≠ê Superstar-Philosophie: Hohe Konzentration SOWOHL im Pass- ALS AUCH im Laufspiel = Setzen auf 2-3 Elite-Spieler. WR1 + RB1 tragen den gesamten Angriff. Einfache Formel: Gib den Ball den besten Spielern. Hohes Risiko ‚Äì eine Verletzung eines von ihnen l√§hmt den Angriff. Aber wenn sie gesund sind ‚Äì unaufhaltsam.',
              topLeft: 'üèÉ Hybrid-Modell: RBBC + Star-WR = clevere Risikobalance. Im Passspiel gibt es einen Go-to-Guy f√ºr kritische Situationen, im Laufspiel sorgt Rotation f√ºr Frische. Die Defense kann sich nicht nur auf Pass oder Lauf konzentrieren.',
              bottomLeft: 'üéØ Totale Demokratie: √úberall niedrige Konzentration = 8-10 Spieler erhalten den Ball gleichm√§√üig. Niemand wird m√ºde, alle sind involviert. Ideal zur Zeitkontrolle und Zerm√ºrbung der Defense. Minus: kein Held in Clutch-Momenten.',
              bottomRight: 'üîÑ Unausgewogener Ansatz: Star-WR + RBBC = √úbergewicht zum Passspiel. Alle explosiven Plays laufen √ºber einen Receiver, der Lauf dient nur der Alibi. Funktioniert gegen schwache Secondarys, ist aber anf√§llig f√ºr starken Pass Rush.'
            }
          },
          {
            xKey: 'wr_target_share',
            yKey: 'te_target_share',
            xLabel: 'WR Target Share (%)',
            yLabel: 'TE Target Share (%)',
            xFormat: fmt1,
            title: 'WR vs TE Usage Balance',
            insight: 'WR-heavy offense (high X, low Y) vs TE-heavy (low X, high Y). Strategic preference.',
            extraInfo: d => `WR1: ${d.wr1_name} | TE1: ${d.te1_name || 'N/A'}`,
            metricHelp: '<strong>WR/TE-Balance:</strong> Vergleicht die Nutzung von Wide Receivern (WR) gegen√ºber Tight Ends (TE). Zeigt die strategischen Vorlieben des Teams im Passspiel.',
            quadrantHelp: {
              topRight: 'üéØ Volles Arsenal: WR 60%+ und TE 20%+ = die Offense nutzt das ganze Feld. WR ziehen die Defense horizontal auseinander, TE attackiert die Nahtstellen in der Mitte. Albtraum f√ºr den Defensive Coordinator: Cover 2 ‚Äì TE zerrei√üt die Mitte, Cover 3 ‚Äì WR finden L√ºcken. Moderner, mehrstufiger Angriff.',
              topLeft: 'üí™ Power-Stil: TE 25%+ bei WR <50% = Spiel √ºber den Tight End und kurze Zonen. 12/13 Personnel dominiert, 2-3 TEs auf dem Feld. Power Run mit Play Action auf den TE. Langsamer, methodischer Stil der Ballkontrolle. Ideal bei schlechtem Wetter.',
              bottomLeft: 'üèÉ Checkdown City: Niedrige WR- und TE-Nutzung = alle P√§sse gehen an RBs und Slots. Entweder h√§lt die O-Line nicht und der QB wirft schnell ab, oder das Schema basiert auf Screens und Draws. Die Defense spielt in der Box, die tiefen Zonen sind leer.',
              bottomRight: 'üöÄ Vertikaler Angriff: WR 70%+ bei TE <10% = 11 Personnel, 3-4 WR immer auf dem Feld. Spread Offense, hohes Tempo, Auseinanderziehen der Defense. TE blockt nur. Setzt auf Geschwindigkeit und Athletik der WR. Funktioniert in Hallen/bei gutem Wetter.'
            }
          },
          {
            xKey: 'wr1_share',
            yKey: 'top3_share',
            xLabel: 'WR1 Share (%)',
            yLabel: 'Top 3 Share (%)',
            xFormat: fmt1,
            title: 'Alpha Receiver vs Supporting Cast',
            insight: 'High both = one star + good #2/#3. High top3, low WR1 = balanced trio.',
            extraInfo: d => `Top 3: ${d.wr1_name}, ${d.wr2_name || 'N/A'}, ${d.wr3_name || 'N/A'}`,
            metricHelp: '<strong>Alpha-Receiver:</strong> Abh√§ngigkeit von WR1 im Verh√§ltnis zu den Top 3. Hohe Werte bei beiden = ein Star + gute #2/#3. Hoher Top-3-Wert, niedriger WR1-Wert = ausgewogenes Trio.',
            quadrantHelp: {
              topRight: '‚≠ê Alpha-Wolf mit Rudel: WR1 30%+ und Top 3 75%+ = es gibt einen klaren Anf√ºhrer, aber WR2/WR3 sind auch gef√§hrlich. WR1 erfordert Double Team, das √∂ffnet WR2/WR3 f√ºr Big Plays. Die Defense steckt in der Falle: Fokus auf WR1 ‚Äì die anderen punkten; WR1 ignorieren ‚Äì er zerrei√üt das Spiel.',
              topLeft: 'üéØ Gleichberechtigtes Trio: Top 3 stark (75%+), aber die Last ist verteilt (WR1 <25%). Drei etwa gleich starke Receiver, QB w√§hlt nach Matchup. Kein Superstar, aber drei sehr gute Spieler. Schwierig f√ºr das Game Planning der Defense.',
              bottomLeft: 'üòî WR-W√ºste: Weder Alpha (<25% WR1) noch starke Top 3 (<60% Top 3) = Katastrophe im Receiving Corps. QB verteilt den Ball auf 6-7 mittelm√§√üige Spieler in der Hoffnung auf ein Wunder. Viele Drops, wenig Separation. Kompletter Umbau des WR-Raums n√∂tig.',
              bottomRight: 'ü§î Einsamer Held: WR1 tr√§gt 35%+ bei Top 3 <65% = WR2/WR3 existieren quasi nicht. Das gesamte Passspiel lastet auf den Schultern eines Spielers. Die Defense kann sich Triple Coverage f√ºr WR1 leisten, da die anderen ungef√§hrlich sind. WR1 f√§ngt umk√§mpfte P√§sse, aber das ist kein nachhaltiges Modell. Dringend Upgrades auf WR2/WR3-Positionen ben√∂tigt.'
            }
          },
          {
            xKey: 'rb1_share',
            yKey: 'rb2_share',
            xLabel: 'RB1 Rush Share (%)',
            yLabel: 'RB2 Rush Share (%)',
            xFormat: fmt1,
            title: 'Running Back Committee Analysis',
            insight: 'Top-right quadrant = true RBBC (both get work). High X, low Y = clear bellcow.',
            extraInfo: d => `RB1: ${d.rb1_name} | RB2: ${d.rb2_name || 'N/A'}`,
            metricHelp: '<strong>RB-Komitee:</strong> Analyse der Laufverteilung zwischen RB1 und RB2. Oberer rechter Quadrant = echtes RBBC (beide bekommen Arbeit), hoher X-Wert niedriger Y-Wert = klarer Bellcow.',
            quadrantHelp: {
              topRight: 'üîÑ Echtes RBBC ‚Äì beide L√§ufer bekommen Arbeit, 50/50-Split oder 60/40',
              topLeft: 'ü§î RB2 dominiert ‚Äì m√∂glicherweise Verletzung von RB1 oder seltsame Situation',
              bottomLeft: 'üòî Schwaches Laufspiel ‚Äì weder RB1 noch RB2 werden aktiv genutzt',
              bottomRight: 'üí™ Bellcow dominiert ‚Äì RB1 erh√§lt 70%+ der L√§ufe, klarer Hauptspieler'
            }
          },
          {
            xKey: 'wr1_share',
            yKey: 'pass_int_pct',
            xLabel: 'WR1 Target Share (%)',
            yLabel: 'INT Rate (%)',
            xFormat: fmt1,
            yFormat: fmt2,
            title: 'üí• Star WR Dependency vs Interception Risk',
            insight: 'Does forcing the ball to one receiver make passing predictable? Check if high WR1 usage = more INTs.',
            metricHelp: '<strong>INT Rate:</strong> Prozentsatz der Interceptions an der Gesamtzahl der P√§sse. Zeigt, ob die Abh√§ngigkeit von einem WR zu vorhersehbaren P√§ssen und Interceptions f√ºhrt.',
            extraInfo: d => `WR1: ${d.wr1_name} - ${fmt2(d.pass_int_pct)}% INT rate`,
            quadrantHelp: {
              topRight: 'üò± Gef√§hrliche Abh√§ngigkeit ‚Äì viele P√§sse auf WR1 + viele Interceptions, vorhersehbares Spiel',
              topLeft: 'üéØ Verteilung sch√ºtzt ‚Äì Ball verteilt + viele INT, m√∂glicherweise QB-Probleme',
              bottomLeft: '‚úÖ Kluges Spiel ‚Äì Ball verteilt + wenig Interceptions, unvorhersehbarer Angriff',
              bottomRight: '‚≠ê Elite-WR1 ‚Äì Konzentration auf den Star, aber wenig INT, der Star wird frei'
            }
          },
          {
            xKey: 'rb1_share',
            yKey: 'rush_broken_tackle_rate',
            xLabel: 'RB1 Rush Share (%)',
            yLabel: 'Broken Tackles per Rush (%)',
            xFormat: fmt1,
            yFormat: fmt2,
            title: 'üí• Bellcow Power: Workload vs Physicality',
            insight: 'Do feature backs break more tackles because they\'re elite, or do committees stay fresher?',
            extraInfo: d => `RB1: ${d.rb1_name} - ${fmt2(d.rush_broken_tackle_rate)}% broken tackle rate`,
            quadrantHelp: {
                topRight: 'üí™ Elite-Bellcow ‚Äì hohe Last + bricht Tackles, physisch dominanter L√§ufer',
                topLeft: 'üîÑ Frische Beine funktionieren ‚Äì RBBC bricht Tackles, Rotation gibt Kraft',
                bottomLeft: 'üòî Schwaches Laufspiel ‚Äì wenig Last + wenig gebrochene Tackles, Probleme',
                bottomRight: '‚ö†Ô∏è Erm√ºdung zeigt sich ‚Äì hohe Last, aber wenig gebrochene Tackles, L√§ufer ist m√ºde'
            }
          },
          {
            xKey: 'pass_concentration',
            yKey: 'sack_rate',
            xLabel: 'Pass Concentration Index',
            yLabel: 'Sack Rate (%)',
            xFormat: fmt1,
            yFormat: fmt2,
            title: 'üí• Predictability Tax: Target Concentration vs Sacks',
            insight: 'Concentrated passing = defenders know where ball goes = more pressure? Or is it just bad O-lines?',
            extraInfo: d => `WR1: ${d.wr1_name} - ${fmt2(d.sack_rate)}% sack rate`,
            metricHelp: '<strong>Sack Rate:</strong> Prozentsatz der Sacks von (Versuche + Sacks). Konzentration auf einen Receiver = Vorhersehbarkeit = mehr Sacks?',
            quadrantHelp: {
              topRight: 'üò± Steuer f√ºr Vorhersehbarkeit ‚Äì Konzentration auf WR1 + viele Sacks, Defense kennt den Plan',
              topLeft: '‚ö†Ô∏è Schlechte O-Line ‚Äì Ball verteilt, aber viele Sacks, Problem beim Linienschutz',
              bottomLeft: '‚úÖ Guter Schutz + Verteilung ‚Äì Ball verteilt + wenig Sacks, ausgezeichnet',
              bottomRight: '‚≠ê Elite-WR rettet ‚Äì Konzentration auf Star, aber wenig Sacks, wird schnell frei'
            }
          },
          {
            xKey: 'te_target_share',
            yKey: 'sack_rate',
            xLabel: 'TE Target Share (%)',
            yLabel: 'Sack Rate (%)',
            xFormat: fmt1,
            yFormat: fmt2,
            title: 'üí• TE Usage: Weapon or Safety Blanket?',
            insight: 'High TE usage with low sacks = protection weapon. High TE + high sacks = last resort checkdown.',
            extraInfo: d => `TE1: ${d.te1_name || 'N/A'} - ${fmt2(d.sack_rate)}% sack rate`,
            metricHelp: '<strong>TE + Sacks:</strong> Hohe TE-Nutzung bei wenigen Sacks = Schutzwaffe. Hohe Werte bei beidem = letztes Mittel unter Druck.',
            quadrantHelp: {
              topRight: '‚ö†Ô∏è TE als Panik-Knopf ‚Äì viel TE + viele Sacks, Abwurf unter Druck',
              topLeft: 'üòî Schlechte O-Line ohne TE-Hilfe ‚Äì wenig TE + viele Sacks, muss TE mehr nutzen',
              bottomLeft: '‚úÖ Kein Sicherheitsventil n√∂tig ‚Äì wenig TE + wenig Sacks, gute O-Line',
              bottomRight: 'üí™ TE als Waffe ‚Äì viel TE + wenig Sacks, strategische Nutzung des Tight Ends'
            }
          },
          {
            xKey: 'top3_share',
            yKey: 'yds_per_play',
            xLabel: 'Top 3 Target Share (%)',
            yLabel: 'Yards per Play',
            xFormat: fmt1,
            yFormat: fmt2,
            title: 'üí• Star Power vs Offensive Efficiency',
            insight: 'Elite receivers unlock efficiency? Or does spreading it around keep defenses honest?',
            extraInfo: d => `Top 3: ${d.wr1_name}, ${d.wr2_name || 'N/A'}, ${d.wr3_name || 'N/A'}`,
            metricHelp: '<strong>Yards per Play:</strong> Durchschnittliche Yards pro Spielzug. Schalten Elite-Receiver Effizienz frei oder h√§lt die Ballverteilung die Defense in Atem?',
            quadrantHelp: {
              topRight: '‚≠ê Stars schalten Effizienz frei ‚Äì Top 3 dominieren + hohe Yards pro Spielzug',
              topLeft: 'üéØ Tiefe schafft Effizienz ‚Äì Verteilung + hohe Yards, Defense ist verwirrt',
              bottomLeft: 'üòî Schwacher Angriff ‚Äì keine Stars + niedrige Yards, Probleme √ºberall',
              bottomRight: 'ü§î Stars helfen nicht ‚Äì Top 3 dominieren, aber niedrige Yards, vorhersehbar'
            }
          },
          {
            xKey: 'rush_concentration',
            yKey: 'rush_yds_per_att',
            xLabel: 'Rush Concentration Index',
            yLabel: 'Rush Yards per Attempt',
            xFormat: fmt1,
            yFormat: fmt2,
            title: 'üí• Bellcow Effectiveness Test',
            insight: 'Does feeding one back work? Or do fresh legs from RBBC produce better yards per carry?',
            extraInfo: d => `RB1: ${d.rb1_name} - ${fmt2(d.rush_yds_per_att)} Y/A`,
            metricHelp: '<strong>Rush Y/A:</strong> Yards pro Lauf. Effizienztest: Ein L√§ufer vs. frische Beine des Komitees ‚Äì wer produziert mehr Yards?',
            quadrantHelp: {
              topRight: 'üí™ Bellcow ist effektiv ‚Äì ein L√§ufer + hohe Yards pro Lauf, Elite-RB',
              topLeft: 'üîÑ RBBC funktioniert ‚Äì frische Beine + hohe Yards, Rotation bringt Ergebnisse',
              bottomLeft: 'üòî Schwaches Laufspiel ‚Äì Komitee + niedrige Yards, keine Qualit√§tsl√§ufer',
              bottomRight: '‚ö†Ô∏è Bellcow erm√ºdet ‚Äì ein L√§ufer + niedrige Yards, M√ºdigkeit oder schlechte O-Line'
            }
          },
          {
            xKey: 'wr1_share',
            yKey: 'qb_rating',
            xLabel: 'WR1 Target Share (%)',
            yLabel: 'QB Rating',
            xFormat: fmt1,
            yFormat: fmt1,
            title: 'üí• Star WR Impact on QB Performance',
            insight: 'Elite WR1 elevates QB play? Or does elite QB make his WR1 look great? Chicken or egg?',
            metricHelp: '<strong>QB Rating:</strong> Quarterback-Rating. Hebt ein Elite-WR1 das QB-Spiel an oder macht ein Elite-QB seinen WR1 zum Star? Huhn oder Ei?',
            extraInfo: d => `${d.wr1_name}: ${fmt1(d.wr1_share)}% share ‚Üí ${fmt1(d.qb_rating)} QB rating`,
            quadrantHelp: {
              topRight: '‚≠ê WR1 hebt QB an ‚Äì Konzentration auf Star + hohes QB-Rating, Elite-Duo',
              topLeft: 'üéØ QB verteilt an alle ‚Äì Verteilung + hohes QB-Rating, kluger Quarterback',
              bottomLeft: 'üòî Schwaches Passspiel ‚Äì kein Star + niedriges QB-Rating, Probleme im Passspiel',
              bottomRight: 'ü§î WR1 hilft QB nicht ‚Äì Konzentration auf Star, aber niedriges QB-Rating, Abh√§ngigkeit funktioniert nicht'
            }
          },
          {
            xKey: 'rb_target_share',
            yKey: 'pass_yds_per_att',
            xLabel: 'RB Target Share (%)',
            yLabel: 'Pass Yards per Attempt',
            xFormat: fmt1,
            yFormat: fmt2,
            title: 'üí• RB Checkdown Strategy: Smart or Desperate?',
            insight: 'High RB targets + high Y/A = designed weapon. High RB targets + low Y/A = QB under pressure dumping off.',
            extraInfo: d => `RB1: ${d.rb1_name} - ${fmt2(d.pass_yds_per_att)} Y/A`,
            metricHelp: '<strong>Pass Y/A:</strong> Yards pro Passversuch. Viele RB-P√§sse + hohes Y/A = Waffe. Viele RB-P√§sse + niedriges Y/A = Abwurf unter Druck.',
            quadrantHelp: {
              topRight: 'üí™ RB als Waffe ‚Äì viele P√§sse auf RB + hohes Y/A, strategische Mismatches',
              topLeft: 'üéØ Effektiver vertikaler Pass ‚Äì wenig RB + hohes Y/A, Angriff √ºber WR/TE',
              bottomLeft: 'üòî Schwaches Passspiel ‚Äì wenig RB + niedriges Y/A, Probleme auf allen Positionen',
              bottomRight: '‚ö†Ô∏è Verzweifelte Abw√ºrfe ‚Äì viel RB + niedriges Y/A, QB wirft unter Druck ab'
            }
          },
          {
            xKey: 'pass_concentration',
            yKey: 'explosive_plays_per_game',
            xLabel: 'Pass Concentration Index',
            yLabel: 'Explosive Plays (20+) per Game',
            xFormat: fmt1,
            yFormat: fmt2,
            title: 'üí• Distribution Strategy vs Big Plays',
            insight: 'Does spreading the ball create more explosive opportunities? Or do stars make the big plays?',
            extraInfo: d => `WR1: ${d.wr1_name} - ${fmt2(d.explosive_plays_per_game)} explosive plays/game`,
            metricHelp: '<strong>Explosive Plays:</strong> Spielz√ºge 20+ Yards pro Spiel. Schafft die Ballverteilung mehr explosive Momente oder machen die Stars die Big Plays?',
            quadrantHelp: {
              topRight: '‚≠ê Star macht Big Plays ‚Äì Konzentration auf WR1 + explosive Spielz√ºge, Elite-Spieler',
              topLeft: 'üéØ Tiefe schafft Explosionen ‚Äì Verteilung + explosive Spiele, viele Bedrohungen',
              bottomLeft: 'üòî Keine Big Plays ‚Äì Verteilung + wenig explosive Plays, keine Playmaker',
              bottomRight: 'ü§î Star nicht explosiv ‚Äì Konzentration auf WR1, aber wenig Big Plays, kurze P√§sse'
            }
          },
          {
            xKey: 'rush_concentration',
            yKey: 'total_turnovers',
            xLabel: 'Rush Concentration Index',
            yLabel: 'Total Turnovers',
            xFormat: fmt1,
            yFormat: fmt1,
            title: 'üí• Ball Security: Bellcow vs Committee',
            insight: 'Feature backs fumble more from fatigue? Or do committees have worse ball security?',
            extraInfo: d => `RB1: ${d.rb1_name} | RB2: ${d.rb2_name || 'N/A'}`,
            metricHelp: '<strong>Turnovers:</strong> Gesamtballverluste. Fumbeln Haupt-L√§ufer mehr wegen M√ºdigkeit oder haben Komitees schlechtere Ballkontrolle?',
            quadrantHelp: {
              topRight: 'üò± Bellcow + viele Ballverluste ‚Äì M√ºdigkeit f√ºhrt zu Fumbles, hohe Last schadet',
              topLeft: '‚ö†Ô∏è Komitee + viele Ballverluste ‚Äì mehrere L√§ufer, aber alle verlieren den Ball, allgemeines Problem',
              bottomLeft: '‚úÖ Komitee passt auf Ball auf ‚Äì frische Beine + gute Ballkontrolle',
              bottomRight: 'üí™ Bellcow zuverl√§ssig ‚Äì hohe Last, aber wenig Ballverluste, Elite-Ballkontrolle'
            }
          },
          {
            xKey: 'wr_target_share',
            yKey: 'pass_td_pct',
            xLabel: 'WR Target Share (%)',
            yLabel: 'Pass TD Rate (%)',
            xFormat: fmt1,
            yFormat: fmt2,
            title: 'üí• WR-Heavy Offense Scoring Efficiency',
            insight: 'WR-centric attacks score more TDs? Or are TEs/RBs better in the red zone?',
            extraInfo: d => `WR1: ${d.wr1_name} | TE1: ${d.te1_name || 'N/A'}`,
            metricHelp: '<strong>Pass TD Rate:</strong> Prozentsatz der Touchdowns von Passversuchen. Erzielen WR-zentrierte Angriffe mehr TDs oder sind TEs/RBs in der Red Zone besser?',
            quadrantHelp: {
              topRight: 'üéØ WR dominieren in der Red Zone ‚Äì viele P√§sse auf WR + hohe TD%, effektiv',
              topLeft: 'üí™ TE/RB erzielen TDs ‚Äì wenig WR + hohe TD%, Tight Ends und Backs in der Red Zone',
              bottomLeft: 'üòî Schwacher Red Zone Angriff ‚Äì wenig WR + niedrige TD%, Probleme beim Scoren',
              bottomRight: 'ü§î WR scoren nicht ‚Äì viele P√§sse auf WR, aber niedrige TD%, Ineffizienz in der Red Zone'
            }
          },
          {
            xKey: 'te_target_share',
            yKey: 'pass_comp_pct',
            xLabel: 'TE Target Share (%)',
            yLabel: 'Completion Percentage',
            xFormat: fmt1,
            yFormat: fmt1,
            title: 'üí• TE Usage: High-Percentage Safety Valve',
            insight: 'TEs are easier throws = higher completion %? Proof that TEs are the ultimate security blanket.',
            extraInfo: d => `TE1: ${d.te1_name || 'N/A'} - ${fmt1(d.pass_comp_pct)}% comp`,
            metricHelp: '<strong>Completion %:</strong> Prozentsatz abgeschlossener P√§sse. TE = leichtere W√ºrfe = h√∂herer Prozentsatz? Beweis, dass TE die ultimative Absicherung ist.',
            quadrantHelp: {
              topRight: 'üí™ TE als Sicherheitsventil ‚Äì viel TE + hohe Completion %, leichte P√§sse funktionieren',
              topLeft: 'üéØ Pr√§ziser Pass ohne TE ‚Äì wenig TE + hohe Completion %, Elite-QB oder gute WR',
              bottomLeft: 'üòî Geringe Pr√§zision ohne TE ‚Äì wenig TE + niedrige Completion %, QB- oder WR-Probleme',
              bottomRight: 'ü§î TE helfen nicht ‚Äì viel TE, aber niedrige Completion %, Problem beim QB'
            }
          },
          {
            xKey: 'top3_share',
            yKey: 'turnover_diff',
            xLabel: 'Top 3 Target Share (%)',
            yLabel: 'Turnover Differential',
            xFormat: fmt1,
            yFormat: fmt1,
            title: 'üí• Star Receivers & Ball Protection',
            insight: 'Elite receivers protect the ball better? Or are teams with top WRs just better overall?',
            extraInfo: d => `Top 3: ${d.wr1_name}, ${d.wr2_name || 'N/A'}, ${d.wr3_name || 'N/A'}`,
            metricHelp: '<strong>Turnover Diff:</strong> Ballverlustdifferenz (Ballgewinne - Ballverluste). Passen Elite-Receiver besser auf den Ball auf oder sind Teams mit Top-WR einfach insgesamt besser?',
            quadrantHelp: {
              topRight: '‚≠ê Stars + Ballkontrolle ‚Äì Top 3 dominieren + positive Turnover-Diff, komplettes Team',
              topLeft: 'üéØ Tiefe + Kontrolle ‚Äì Verteilung + positive Diff, Teamspiel',
              bottomLeft: 'üòî Keine Stars + verlieren Ball ‚Äì Verteilung + negative Diff, schwaches Team',
              bottomRight: 'ü§î Stars retten nicht ‚Äì Top 3 dominieren, aber negative Diff, Probleme in anderen Bereichen'
            }
          },
          {
            xKey: 'rb1_share',
            yKey: 'rush_td_pct',
            xLabel: 'RB1 Rush Share (%)',
            yLabel: 'Rush TD Rate (%)',
            xFormat: fmt1,
            yFormat: fmt2,
            title: 'üí• Goal Line Back: Who Gets the Glory?',
            insight: 'Bellcows dominate goal-line work? Or do committees rotate in fresh power backs for TDs?',
            extraInfo: d => `RB1: ${d.rb1_name} | RB2: ${d.rb2_name || 'N/A'}`,
            metricHelp: '<strong>Rush TD Rate:</strong> Prozentsatz der Touchdowns von L√§ufen. Dominieren Bellcows an der Goal Line oder rotieren Komitees Power Backs f√ºr TDs rein?',
            quadrantHelp: {
              topRight: 'üí™ Bellcow erzielt TDs ‚Äì hohe Last + hohe TD%, RB1 dominiert in der Red Zone',
              topLeft: 'üîÑ Goal Line Spezialist ‚Äì RBBC + hohe TD%, rotieren Power Back f√ºr TDs',
              bottomLeft: 'üòî Schwacher Laufangriff ‚Äì RBBC + niedrige TD%, scoren nicht am Boden',
              bottomRight: 'ü§î Bellcow scort nicht ‚Äì hohe Last, aber niedrige TD%, wird nicht in der Red Zone eingesetzt'
            }
          },
          {
            xKey: 'pass_concentration',
            yKey: 'drop_rate',
            xLabel: 'Pass Concentration Index',
            yLabel: 'Drop Rate (%)',
            xFormat: fmt1,
            yFormat: fmt2,
            title: 'üí• Target Overload: Does WR1 Drop More?',
            insight: 'Feeding one receiver = more drops from fatigue? Or do elite WRs have better hands?',
            extraInfo: d => `WR1: ${d.wr1_name} - ${fmt2(d.drop_rate)}% drop rate`,
            metricHelp: '<strong>Drop Rate:</strong> Prozentsatz der fallen gelassenen P√§sse von Zielen. Einen Receiver f√ºttern = mehr Drops durch M√ºdigkeit oder haben Elite-WR bessere H√§nde?',
            quadrantHelp: {
              topRight: 'üò± M√ºdigkeit WR1 ‚Äì Konzentration auf Star + hohe Drop Rate, √úberlastung f√ºhrt zu Fehlern',
              topLeft: '‚ö†Ô∏è H√§nde-Problem ‚Äì Verteilung + hohe Drop Rate, allgemeines Problem des Corps',
              bottomLeft: '‚úÖ Zuverl√§ssiges Corps ‚Äì Verteilung + niedrige Drop Rate, alle fangen gut',
              bottomRight: '‚≠ê Elite-WR1 ‚Äì Konzentration + niedrige Drop Rate, zuverl√§ssige H√§nde des Stars'
            }
          },
          {
            xKey: 'rb_target_share',
            yKey: 'rec_yac_pct',
            xLabel: 'RB Target Share (%)',
            yLabel: 'YAC % (of receiving yards)',
            xFormat: fmt1,
            yFormat: fmt1,
            title: 'üí• RB Receptions: YAC Machines or Dump-offs?',
            insight: 'High RB targets + high YAC% = dynamic weapons. High RB + low YAC% = desperation checkdowns at LOS.',
            extraInfo: d => `RB1: ${d.rb1_name} - ${fmt1(d.rec_yac_pct)}% YAC`,
            metricHelp: '<strong>YAC %:</strong> Prozentsatz der Yards nach dem Fang. Viele RB-P√§sse + hohes YAC% = dynamische Waffe. Viel RB + niedriges YAC% = Abwurf an der Linie.',
            quadrantHelp: {
              topRight: 'üí™ RB als YAC-Maschine ‚Äì viele P√§sse auf RB + hohes YAC%, dynamische Waffe',
              topLeft: 'üéØ WR schaffen YAC ‚Äì wenig RB + hohes YAC%, Receiver sammeln nach dem Fang',
              bottomLeft: 'üòî Niedriges YAC √ºberall ‚Äì wenig RB + niedriges YAC%, Probleme nach dem Fang',
              bottomRight: '‚ö†Ô∏è Dump-offs an der Linie ‚Äì viel RB + niedriges YAC%, verzweifelte Abw√ºrfe unter Druck'
            }
          }
        ];

        const root = d3.select('#root');
        const sel = d3.select('#conf');

        function redraw() {
          const conf = sel.node().value;
          root.selectAll('*').remove();
          const filtered = conf === 'ALL' ? allRows : allRows.filter(d => d.conference === conf);
          charts.forEach(cfg => drawScatter(root, filtered, cfg));
        }

        sel.on('change', redraw);
        redraw();
      });
    }

    document.addEventListener('DOMContentLoaded', render);
  </script>
</head>
<body>
  <div class="container">
    <h1>Team Player Usage Patterns</h1>
    <div class="subtitle">
      25 graphs combining player usage distribution with team performance. Red = above trend, Blue = below trend.
      Reveals star-driven vs committee approaches and their impact on efficiency, turnovers, and scoring.
    </div>
    <div class="controls">
      <label for="conf">Conference:</label>
      <select id="conf">
        <option value="ALL" selected>All Conferences</option>
        <option value="AFC">AFC only</option>
        <option value="NFC">NFC only</option>
      </select>
    </div>
    <div class="info">
      <strong>Usage Patterns Explained:</strong>
      <ul style="margin: 6px 0 0; padding-left: 20px; line-height: 1.6;">
        <li><strong>Star-Driven</strong>: High concentration (Herfindahl > 1500) - One dominant player gets majority of touches</li>
        <li><strong>Balanced</strong>: Moderate concentration (1000-1500) - Feature player with solid supporting cast</li>
        <li><strong>Committee/Spread</strong>: Low concentration (< 1000) - Multiple players share workload evenly</li>
        <li><strong>Bellcow RB</strong>: RB1 gets 70%+ of rushes - Traditional workhorse back</li>
        <li><strong>RBBC (Running Back By Committee)</strong>: RB1 < 60%, RB2 > 25% - Split backfield</li>
      </ul>
    </div>
    <div id="root"></div>
  </div>
</body>
</html>
